---
title: 进程状态
date: 2022-06-04
publish: false
---


### 进程状态

1、创建状态

进程由创建而产生。创建进程是一个非常复杂的过程，一般需要通过多个步骤才能完成；如首先由进程申请一个空白的进程控制块（PCB），并向PCB中填写用于控制和管理进程的信息；然后为该进程分配运行时所必须的资源；最后，把该进程转入就绪状态并插入到就绪队列中。

2、就绪状态

这是指进程已准备好运行的状态，即进程已分配到除CPU以外的所有的必要资源后，只要再获得CPU，便可立即执行。如果系统中有许多处于就绪状态的进程，通常将他们按照一定的策略排成一个队列，该队列称为就绪队列。有执行资格，没有执行权的进程。

3、运行状态

这里指进程已经获得CPU，其进程处于正在执行的状态。对任何一个时刻而言，在单处理机系统中，只有一个进程处于执行状态而在多处理机系统中，有多个进程处于执行状态。既有执行资格，又有执行权的进程。

4、阻塞状态

这里指正在执行的进程由于发生某事件（如I/O请求、申请缓冲区失败等）暂时无法继续执行的状态，即进程执行受到阻塞。此时引起进程调度，操作系统把处理机分配给另外一个就绪的进程，而让受阻的进程处于暂停的状态，一般将这个暂停状态称为阻塞状态。

5、终止状态

进程的终止也要通过两个步骤：首先，是等待操作系统进行善后处理，最后将其PCB清零，并将PCB空间返还给系统。当一个进程到达了自然结束点，或是出现了无法克服的错误，或是被操作系统所终结，或是被其他有终止权的进程所终结，他将进入终止状态。进入终止状态的进程以后不能再执行，但是操作系统中仍保留一个记录，其中保存的状态码和一些计时统计数据，供其他进程进行收集。一旦其他进程完成了对其信息的提取之后，操作系统将删除其进程，即将其PCB清零，并将该空白的PCB返回给系统。

* 为什么要分开就绪状态和阻塞状态

因为就绪态只需要等待处理机，而阻塞态可能在等待输入输出，即是分配给处理机也是徒劳，所以两状态相同不妥。对于进程调度，只需要等待就绪队列里的进程，因为阻塞状态可以装换到就绪队列里去。

* 进程五状态

![在这里插入图片描述](https://img-blog.csdnimg.cn/55653ccbd04a4db59f6fedb07bc3a90f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_20,color_FFFFFF,t_70,g_se,x_16)

* 多个进程竞争内存资源

a. 内存资源紧张；

b. 无就绪队列，处理机空闲：I/O速度比处理机速度慢得多，可能会出现全部进程阻塞等待I/O

解决方案：

交换技术：换出一部分暂时不能运行的进程（阻塞进程）到外层（只换出程序和数据，PCB不换出），以腾出空间，可以调用新进程来执行。

虚拟存储技术：每个进程只能装入一部分程序和数据

### 进程挂起

挂起：进程被交换到外存，状态变为挂起状态

<hr>

2.1 进程挂起的原因

1. 进程全部阻塞，处理机空闲；

2. 系统负荷过重，内存空间紧张。（让其他进程先执行完）

3. 操作系统的需要。操作系统可能需要挂起后台进程或一些服务进程，或者某些可能导致故障的进程；

4. 终端用户请求；

5. 父进程的需求

<hr>

2.2 挂起进程的特征

1. 不能立即执行；

2. 可能是等待某事件发生，若是，则阻塞条件独立于挂起条件，即是阻塞事件发生，该进程也不能执行；

3. 阻塞和挂起没有关系；

4. 如果A进程现在要求输入数据，此时A进程属于阻塞状态，在选择挂起进程的时候，可能先选择阻塞进程（A进程），此时A进程挂起，正在输入数据，输入到内存缓存区内。当数据输完了，向处理机发送命令数据已经输入完成，阻塞事件解除，但实际上还是挂起所以仍是挂起态；

5. 使之挂起的进程为：自身、父进程、操作系统

6. 只有挂起它的进程才能使之由挂起态转换为其他状态

<hr>

2.3 阻塞与挂起

进程是否等待事件：阻塞与否；

进程是否被换出内存：挂起与否；

<hr>

2.4 四种状态组合

就绪：进程在内存，准备执行；

阻塞：进程在内存，等待事件；

就绪/挂起：进程在外存，只要调入内存即可执行；

阻塞/挂起：进程在外存，等待事件。

<hr>

2.5 处理机可调度执行的进程有两种

1、新创建的进程；

2、或换入一个以前挂起的进程；

通常为避免增加系统负载，系统会换入一个以前挂起的进程执行。

### 具有挂起状态的进程间的切换

![在这里插入图片描述](https://img-blog.csdnimg.cn/07f466bd27664513b7ab0ba8ab346d6e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_20,color_FFFFFF,t_70,g_se,x_16)

阻塞->阻塞/挂起：OS通常将阻塞进程换出，以腾出内存空间；

阻塞/挂起->就绪/挂起：当阻塞/挂起进程等待的事件发生时，可以将其转换为就绪/挂起；

就绪/挂起->就绪：OS需要调入一个进程执行；

就绪->就绪/挂起：一般，OS挂起阻塞进程。但是，有时候也会挂起就绪进程，释放足够多的内存空间；

新->就绪/挂起（新->就绪）：新进程创建后，可以插入到就绪队列或就绪/挂起队列，若无足够的内存分配给新进程，则需要->就绪/挂起。