---
title: 内存溢出
date: 2022-03-08
publish: false
---

### JVM内存溢出发生在什么地方

1、Java堆溢出

Java堆用于存储对象的实例，如果不停的创建对象，并且保证GC Roots到对象之间有可达路径来避免垃圾回收机制清除这些对象，那么对象数量达到最大堆的容量限制之后就会产生内存溢出异常

2、虚拟机栈和本地方法栈溢出

调用方法的时候，会在栈中入栈一个栈帧，如果当前栈的容量不足，就会发生栈溢出

StackOverFlowError

递归调用方法，使方法不断压入栈中，却不出栈；

或者一个方法中的局部变量很多或是很大，导致一个栈帧很大，这两种都会导致栈溢出。

3、运行时常量池溢出

这里存储的是一些常量，字面量。如果运行时常量池内存不足，就会发生内存溢出。

JDK1.7开始，运行时常量池也移动到了堆中，所以如果堆的内存不足，也会导致运行时常量池内存溢出。

4、方法区溢出

方法区是用来存放class的相关信息的，如类名、访问修饰符、字段描述、方法描述等。

对这些区域的测试，基本思想是运行时产生大量的类去填满方法区，直到内存溢出、
这里使用CGLIB创建大量的代理类。


